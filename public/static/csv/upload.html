  <div class="row">
  <div class="col-lg-12">
<div class="bs-docs-section">
<div class="bs-callout bs-callout-info">
      <h4>ขั้นตอน &amp; วิธีการใช้งาน</h4>
      <!--<p>ระบบ <code>.btn-group</code>, you'll have to 
       specify the option <code>container: 'body'</code> to 
       avoid unwanted side effects (such as the element growing 
       wider and/or losing its rounded corners when the tooltip 
       or popover is triggered).</p>
      -->
    </div>
    </div>
</div>
</div>
<div class="row">
  <div class="col-lg-6 well">
    <div class="row">
      <div class="col-lg-12">
        <form class="form-inline pull-left"
          id="file_upload_form"
          method="post" 
          enctype="multipart/form-data"
          action="csv/upload"
          target="upload_target" 
          class="form-horizontal">
          <div class="row">
            <div class="col-lg-10">
              <label>Select File</label>
              <input type="file" name="file"
                id="file"
                onchange="angular.element(this).scope().setFile(this)"/>
              <p class="help-block">กรุณาเลือก CSV ไฟล์ ที่ต้องการนำเข้าฐานข้อมูล.</p>
            </div>
            <div class="col-lg-2">
              <button type="submit"
                ng-disabled="theFile==null"
                class="btn btn-primary start">
                <i class="icon-upload icon-white"></i> Input CSV file
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <span ng-show="theFile">
          <!-- {{theFile.name}}--> 
         <span ng-show = "data.csv">รายการ CSV file ที่พบจำนวน </span> 
         <span ng-show = "data.csv" 
            class="label label-success">{{data.csv.length}}</span>  
         <span ng-show = "data.csv">แถว 
           <br>(<b>ขั้นต่อไป</b> เลือกฟังก์ชั่นใน Dropdown List สำหรับ Map เพื่อนำเข้าข้อมูลลงฐานข้อมูล)
         </span> 
        </span>
      </div>
    </div>
  </div>
  <div class="col-lg-1"></div>
  <div class="col-lg-5 well" ng-show = "data.csv">
    <div class="row" ng-show="theFile">
      <div class="col-lg-10">
        <div class="input-append">
          <select ng-model="type" class="col-lg-6 form-control" 
            ng-change="display_meta()"
            ng-options="a.name for a in mapping_schema">
          </select>
        </div>
      </div>
      <div class="col-lg-2">
        <button class="btn btn-success" ng-click="test()">Run</button>
      </div>
    </div>
    <div class="row" ng-show="theFile">
      <div class="col-lg-10">
        <div class = "alert alert-info">
          <b>คำเตือน!</b> กรุณาเลือกประเภทฟังก์ชั่นสำหรับ map ตามประเภทของInput file 
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-10">
        {{type.description}}
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12" >
    <h3 ng-show = "data.csv">Source: CSV Content</h3>
    <div class="row">
      <table class="table table-condensed">
        <tr ng-repeat="row in data.csv" ng-class="row.status">
          <td>
            <div ng-show="row.message">
              <span class="label label-{{row.status}}">
                {{row.message}}
              </span>
            </div>
            <span ng-repeat="(key,value) in row">
              <span ng-hide="value.hide">
                <span class="text-info">
                  <span ng-show="value.meta">{{value.meta}}</span>
                  <span ng-hide="value.meta">{{key}}</span>
                </span> 
                {{value.value}}
              </span>
            </span>
            <table class="table table-striped" ng-show="row.message_list[0]">
              <!--<caption>.....</caption>-->
              <thead>
                <tr>
                  <th> Table Name </th>
                  <th> Data Elements  </th>
                </tr> 
              </thead> 
              <tr ng-repeat="message in row.message_list">
                <td><b>{{message.table_name}}</b></td> 
	        <td>{{message.message}}</td>
              </tr> 
            </table>
           <!---->
          </td>
        </tr>
      </table>
  </div>
</div>


<iframe id="upload_target" 
    name="upload_target" 
    style="width:0;height:0;border:0px solid #fff;">
</iframe>
